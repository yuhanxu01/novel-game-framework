# 自动化运行指南

本系统现在只保留两个关键脚本，其他冗余脚本已删除。

## 📝 可用脚本

### 1️⃣ RUN_AUTO_CLAUDE.sh - 完全自动化系统（推荐）

**用途**：长期无人值守运行，自动处理所有章节

**特点**：
- ✅ 后台监控，自动检测卡死
- ✅ 自动处理5小时额度限制（等待后继续）
- ✅ 实时日志记录
- ✅ 进度监控和自动重启
- ✅ 统计信息跟踪

**使用方法**：

```bash
# 完全自动化模式（推荐）- 遇到额度限制会自动等待5小时后继续
./RUN_AUTO_CLAUDE.sh

# 元任务模式 - 让AI改进系统
./RUN_AUTO_CLAUDE.sh --meta

# 查看当前状态
./RUN_AUTO_CLAUDE.sh --status

# 单次运行模式 - 只处理一章，然后退出
./RUN_AUTO_CLAUDE.sh --once

# 查看帮助
./RUN_AUTO_CLAUDE.sh --help
```

**适合场景**：
- 长期运行，不需要人工干预
- 晚上睡觉时让它自动处理
- 额度用完后自动等待恢复

---

### 2️⃣ RUN_SIMPLE.sh - 简化启动器

**用途**：手动控制，单次运行

**特点**：
- ✅ 简单直接
- ✅ 实时输出
- ✅ 单次执行
- ✅ 适合测试

**使用方法**：

```bash
./RUN_SIMPLE.sh
```

**适合场景**：
- 测试系统是否正常工作
- 偶尔手动处理一章
- 查看详细的执行过程

---

## 🔧 常见问题

### Q: 为什么之前无法自动运行？
A: 脚本中的额度检测逻辑有bug，现在已经修复。从日志看，脚本检测到额度限制后就退出了，而不是等待5小时后继续。

### Q: 如何让它长期自动运行？
A: 使用 `./RUN_AUTO_CLAUDE.sh` 命令，它会：
1. 自动处理章节
2. 遇到额度限制时等待5小时
3. 额度恢复后自动继续
4. 不断循环直到完成所有1694章

### Q: 如何查看进度？
A: 使用以下命令：
```bash
# 查看当前状态
./RUN_AUTO_CLAUDE.sh --status

# 或直接查看进度文件
cat tools/progress.json

# 查看运行日志
tail -f logs/auto_runner.log
```

### Q: 如何停止自动运行？
A: 按 `Ctrl+C` 即可安全退出

### Q: 额度限制是什么？
A: Claude API有使用限制（通常是5小时或一定请求数），达到限制后会暂时无法使用。脚本会自动检测并等待5小时后继续。

---

## 📊 日志文件

- `logs/auto_runner.log` - 运行日志，包含所有运行信息
- `logs/claude_output.log` - Claude执行日志
- `auto_state.json` - 运行统计信息

---

## 🚀 快速开始

1. **首次使用**：先用 `RUN_SIMPLE.sh` 测试
   ```bash
   ./RUN_SIMPLE.sh
   ```

2. **确认正常后**：启动完全自动化
   ```bash
   ./RUN_AUTO_CLAUDE.sh
   ```

3. **查看进度**：另开一个终端
   ```bash
   tail -f logs/auto_runner.log
   ```

---

## ✅ 已删除的冗余脚本

以下脚本已被删除（功能重复）：
- ❌ RUN_AUTO_FOREGROUND.sh
- ❌ RUN_AUTO_REALTIME.sh
- ❌ RUN_FINAL.sh
- ❌ RUN_INTERACTIVE.sh
- ❌ RUN_REALTIME.sh
- ❌ RUN_AUTO_FULLY.sh

**只保留两个关键脚本，简化选择！**
