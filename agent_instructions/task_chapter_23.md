# 第 23 章处理任务

## 📖 任务说明

处理小说的第 23 章。

## 🔧 执行步骤

### 1. 读取章节

使用 Read 工具读取小说文件，提取第 23 章的内容。

```python
# 伪代码示例
content = read_file("novel/斗破苍穹.txt")
chapter_23_content = extract_chapter(content, 23)
```

### 2. 完整阅读

⚠️ **重要**: 完整阅读章节内容，不要跳过！

### 3. 分析章节

参考 `prompts/01-小说分析器.md`，提取：

- **核心事件**: 本章发生的主要事件
- **角色动态**: 角色的行为、对话、心理
- **新发现**:
  - 新角色（名称、初步特征）
  - 新地点（名称、描述）
  - 新物品（名称、作用）
  - 新设定（世界观元素）

### 4. 更新数据

#### 4.1 更新累积上下文

编辑 `data/accumulated_context.json`:

```json
{
  "已识别角色": [...],  // 添加新角色
  "已知世界观元素": [...],  // 添加新设定
  "前文摘要": "...",  // 更新摘要
  "片段摘要列表": [...],  // 添加本章摘要
  "发现的物品": [...],  // 添加新物品
  "发现的地点": [...]  // 添加新地点
}
```

#### 4.2 更新世界观

参考 `prompts/02-世界观提取器.md`，更新 `data/world_setting.json`

#### 4.3 更新角色

参考 `prompts/03-角色分析器.md`，更新 `data/characters.json`

### 5. 生成章节摘要

创建 `data/chapter_summaries/chapter_23.json`:

```json
{
  "chapter_number": 23,
  "核心事件": "...",
  "详细描述": "...",
  "剧情重要性": "核心剧情/支线剧情/日常",
  "角色动态": [...],
  "新发现": {...}
}
```

### 6. 更新进度

编辑 `tools/progress.json`:

```json
{
  "current_chapter": 23,
  "last_success": true
}
```

### 7. 完成确认

在 `agent_instructions/CURRENT_TASK.md` 末尾标记完成：

```markdown
- [x] 第23章 - ✅ 已完成 (2026-01-13 10:11:42)
```

---

**完成后，继续处理第 24 章。**
