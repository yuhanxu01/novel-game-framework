# 🤖 Claude Code Agent 小说处理任务

## 📋 任务概述

你是一个专业的小说分析和游戏设计 Agent。
你的任务是将小说《斗破苍穹.txt》转换为交互式文字冒险游戏。

**重要提醒：不要跳过任何步骤，不要省略阅读！**

---

## 📊 当前进度

- **小说文件**: `novel/斗破苍穹.txt`
- **项目名称**: 斗破苍穹游戏
- **当前章节**: 22/1694
- **完成进度**: 1.30%
- **回顾间隔**: 每 10 章

---

## 🎯 你需要做的事情

### 阶段1: 读取和分析当前章节

1. **读取章节文件**
   ```bash
   # 使用 Read 工具读取小说文件
   # 从第 23 章开始
   ```

2. **完整阅读章节内容**
   - ⚠️ **不要跳过阅读**
   - ⚠️ **不要使用摘要或省略**
   - ✅ 完整阅读每一章的内容

3. **分析章节** (使用提示词 `prompts/01-小说分析器.md`)
   - 提取核心事件
   - 识别角色动态
   - 记录新发现（新角色、新地点、新物品、新设定）
   - 评估剧情重要性

4. **更新累积数据**
   - 更新 `data/accumulated_context.json`
   - 添加新发现到相应列表

### 阶段2: 每章都要执行的更新

对于**每一章**，你都需要：

1. **更新世界观** (使用 `prompts/02-世界观提取器.md`)
   - 提取力量体系
   - 提取地理设定
   - 提取社会制度

2. **更新角色信息** (使用 `prompts/03-角色分析器.md`)
   - 更新角色档案
   - 分析角色关系
   - 记录角色成长

3. **生成章节摘要**
   - 总结本章核心内容
   - 记录重要事件
   - 保存到 `data/chapter_summaries/chapter_23.json`

4. **保存进度**
   - 更新 `tools/progress.json`
   - 设置 `current_chapter` 为 23

### 阶段3: 每10章的回顾

当完成第 32 章时，执行回顾：

1. **统计分析**
   - 统计累积发现的角色数量
   - 统计累积发现的地点数量
   - 统计累积发现的物品数量

2. **质量检查**
   - 检查最近10章的摘要
   - 确保没有遗漏重要信息
   - 验证角色关系的一致性

3. **生成回顾报告**
   - 保存到 `data/reviews/review_3.md`
   - 包含统计信息和质量评估

4. **自动批准并继续**
   - 在回顾报告中写明 "✅ 已批准"
   - 继续处理下一批次

---

## 📁 文件结构

你需要维护以下文件：

```
data/
├── accumulated_context.json          # 累积上下文
├── world_setting.json                # 世界观设定
├── characters.json                   # 角色档案
├── chapter_summaries/                # 章节摘要
│   ├── chapter_1.json
│   ├── chapter_2.json
│   └── ...
└── reviews/                          # 回顾报告
    ├── review_1.md                   # 第1-10章回顾
    ├── review_2.md                   # 第11-20章回顾
    └── ...
```

---

## 🔄 工作流程

```
开始
  ↓
读取第23章 (使用 Read 工具) ← 重要：完整阅读！
  ↓
分析章节 (使用 01-小说分析器.md)
  ↓
更新世界观 (使用 02-世界观提取器.md)
  ↓
更新角色 (使用 03-角色分析器.md)
  ↓
生成章节摘要
  ↓
保存进度 (更新 tools/progress.json)
  ↓
如果到达回顾点 (第32章)
  ├─ 执行回顾
  ├─ 生成报告
  └─ 自动批准
  ↓
继续下一章 (重复流程)
```

---

## 📝 提示词参考

处理过程中使用以下提示词：

1. **`prompts/01-小说分析器.md`** - 分析每个章节
2. **`prompts/02-世界观提取器.md`** - 提取世界观元素
3. **`prompts/03-角色分析器.md`** - 分析角色信息
4. **`prompts/04-剧情设计器.md`** - 设计剧情分支（每100章）
5. **`prompts/05-世界线收束设计.md`** - 设计收束点（中期）
6. **`prompts/06-属性系统设计.md`** - 设计属性系统（中期）
7. **`prompts/07-物品道具设计.md`** - 设计物品系统（中期）
8. **`prompts/08-探索系统设计.md`** - 设计探索系统（中期）

---

## ⚠️ 重要提醒

### 必须遵守的原则：

1. ✅ **完整阅读每一章** - 不要跳过，不要省略
2. ✅ **每章都要分析** - 不要批量处理
3. ✅ **每章都要更新** - 世界观、角色、摘要
4. ✅ **保存所有数据** - 不要遗漏任何文件
5. ✅ **按顺序处理** - 从第23章开始，逐章进行

### 不要做的事情：

1. ❌ 不要跳过阅读步骤
2. ❌ 不要批量处理多章
3. ❌ 不要省略任何分析步骤
4. ❌ 不要忘记保存进度
5. ❌ 不要跳过回顾检查

---

## 🚀 开始执行

**现在开始处理第 23 章！**

1. 使用 Read 工具读取小说文件的第 23 章
2. 完整阅读章节内容
3. 按照上述流程进行分析和处理
4. 保存所有结果文件
5. 更新进度并继续下一章

**记住：不要跳过任何步骤，不要省略阅读！**

---

## 📊 进度跟踪

每完成一章，在此文件末尾添加完成记录：

### 完成记录

- [ ] 第23章 - 待处理
- [ ] 第24章 - 待处理
- [ ] ...

---

**开始执行吧！** 🎉

---

## ✅ 第23章处理完成报告

**处理时间**: 2026-01-13
**章节**: 第二十三章《争抢》

### 📊 处理内容

1. ✅ **完整阅读**: 从第2032行到第2131行，共99行内容
2. ✅ **章节分析**: 生成详细的章节摘要（`data/chapter_summaries/chapter_23.json`）
3. ✅ **世界观更新**: 创建世界观设定文件（`data/world_setting.json`）
4. ✅ **角色分析**: 创建6个角色档案（`data/characters.json`）
5. ✅ **累积上下文更新**: 更新累积上下文（`data/accumulated_context.json`）
6. ✅ **进度保存**: 更新进度为第23章（`tools/progress.json`）

### 📝 本章核心内容

**核心事件**: 米特尔拍卖行拍卖玄阶高级功法《风卷决》，加列毕、奥巴帕和萧战激烈竞价，最终萧战故意抬价后退出，让加列毕以55万金币的天价拍下

**新发现角色**: 萧炎、萧战、加列毕、奥巴帕、雅妃、药老
**新发现地点**: 米特尔拍卖行、乌坦城
**新发现物品**: 风卷决（玄阶高级功法）、怒狮狂罡（萧家功法）、筑基灵液

### 🌍 世界观发现

- 力量体系：斗气修炼，功法分为玄阶低中高级
- 修炼等级：包括斗者等级
- 经济体系：金币为货币，20万金币=萧家两年利润
- 社会结构：三大家族统治乌坦城（萧家、加列家、奥巴家）

### 👥 角色关系

- 萧炎（主角）← 药老（导师，神秘存在）
- 萧炎 ← 萧战（父子关系）
- 萧战 ↔ 加列毕（仇敌，因拍卖会冲突）
- 三大家族：萧家、加列家、奥巴家（竞争关系）

### 🎯 游戏化潜力

- 可设计选择点：在拍卖会上的决策（是否参与竞价、是否使用策略）
- 势力系统：三大家族关系和声望
- 拍卖系统：米特尔拍卖行可作为重要玩法
- 师徒系统：药老指导萧炎修炼

### 📈 下一步

继续处理第24章《一切待续》

---

